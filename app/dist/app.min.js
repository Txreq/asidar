(()=>{var e={43:(e,t,s)=>{const o=s(288),r=s(472),i=s(81),n=s(17),a=s(147);r.setFfmpegPath(o);let l=process.env.HOMEPATH;void 0===l&&(l="./");const c=n.resolve(l,"Music","Asidar");e.exports=async function(e,t={filename,fileprefix,path:n,audioQuality}){if("string"!=typeof e)return;void 0===t.audioQuality&&t.audioQuality,"string"!=typeof t.path&&(a.existsSync(c)||a.mkdirSync(c,{recursive:!0}),t.path=c);const s=n.resolve(t.path,t.fileprefix+t.filename+".mp3"),r=i.spawn(String(o),["-loglevel","8","-hide_banner","-progress","pipe:3","-i","pipe:4","-b:a",`${t.audioQuality}k`,s],{windowsHide:!0,stdio:["inherit","inherit","inherit","pipe","pipe"]});stream.pipe(r?.stdio[4])},e.exports={DEFAULT_DL_PATH:c,USER_HOMEDIR:l}},23:(e,t,s)=>{const{ipcMain:o,dialog:r,BrowserWindow:i}=s(496),{defaultSchema:n,restoreDefault:a,saveSettings:l,getUserPreferences:c}=s(158),p=(s(43),s(30));e.exports=function(e){console.log("- events have loaded"),o.handle("select-dir",(async()=>await r.showOpenDialog(e,{properties:["openDirectory"]}))),o.handle("user-prefs",(e=>({user:c(),defaultPrefs:n}))),o.handle("restore",(()=>a)),o.handle("save",((e,t)=>{l(t)})),o.handle("download",(async(e,t)=>{if(c(),t)return(await p.getInfo(t)).items[0]}))}},158:(e,t,s)=>{const o=s(681),{DEFAULT_DL_PATH:r}=s(43),i=new o,n="user-settings",a={defaultDownloadsPath:r,lastTimeUpdated:new Date,audioQuality:"128",filePrefix:""};e.exports={saveSettings:function(e){console.log(e),i.set(n,e)},restoreDefault:function(){i.set(n,a)},getUserPreferences:function(){const e=i.get(n);return e||i.set(n,a),e},defaultSchema:a}},496:e=>{"use strict";e.exports=require("electron")},681:e=>{"use strict";e.exports=require("electron-store")},472:e=>{"use strict";e.exports=require("ffmetadata")},288:e=>{"use strict";e.exports=require("ffmpeg-static")},30:e=>{"use strict";e.exports=require("ytdl-getinfo")},81:e=>{"use strict";e.exports=require("child_process")},147:e=>{"use strict";e.exports=require("fs")},17:e=>{"use strict";e.exports=require("path")},310:e=>{"use strict";e.exports=require("url")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,s),i.exports}(()=>{const{app:e,BrowserWindow:t,dialog:o}=s(496),r=s(17),i=s(310),n=s(23);function a(){const e=r.join(__dirname,"../build","index.html"),s=new t({height:480,width:680,resizable:!1,webPreferences:{nodeIntegration:!0,contextIsolation:!1},icon:r.join(__dirname,"../assets","asidar.ico")});n(s),s.on("closed",(()=>null==s)),void 0!==process.env.MODE?s.loadURL("http://localhost:3000/").then((()=>{s.webContents.openDevTools({mode:"detach"})})):(console.log("- production build test"),s.removeMenu(),s.loadURL(i.format({protocol:"file",pathname:e,slashes:!0})))}console.log("- mode: ",process.env.MODE),e.whenReady().then((()=>{a(),e.on("activate",(()=>{0==t.getAllWindows().length&&a()}))})),e.on("window-all-closed",(()=>{"darwin"!=process.platform&&e.quit()}))})()})();