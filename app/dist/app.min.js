(()=>{var e={23:(e,t,s)=>{const{ipcMain:o,dialog:r,BrowserWindow:n}=s(496),{audioConverter:i}=s(478),a=s(30),l=new(s(158));e.exports=function(e=n){console.log("- events have loaded"),o.handle("select-dir",(async()=>await r.showOpenDialog(e,{properties:["openDirectory"]}))),o.handle("user-prefs",(e=>({user:l.getUserPreferences(),defaultPrefs:l.defaultSchema}))),o.handle("restore",(()=>l.restoreDefault())),o.handle("save",((e,t)=>{l.saveSettings(t)}));let t=[];o.handle("download",(async(e,s)=>{const o=l.getUserPreferences();if(!s)return;const r=(await a.getInfo(s)).items[0];return i(s,{outFilename:String(r.title).replace(/:|\?|\\|\/|\:|\*|<|>|\"|\|/g,""),outPath:o.defaultDownloadsPath,filePrefix:o.filePrefix,audioQuality:o.audioQuality}).then((e=>{e.on("end",(()=>{t.push(r.display_id)}))})),r})),o.handle("progress",((e,s)=>!!t.includes(s))),o.handle("clear",(()=>{t=[]}))}},158:(e,t,s)=>{const o=s(681),r=(s(17),new o),n="user-settings";e.exports=class{constructor(){this.defaultSchema={defaultDownloadsPath:"C:\\",audioQuality:"128",filePrefix:""}}getUserPreferences(){const e=r.get(n);return e||r.set(this.userSettingsKey,this.defaultSchema),e}saveSettings(e){r.set(n,e)}restoreDefault(){r.set(this.userSettingsKey,this.defaultSchema)}}},478:e=>{"use strict";e.exports=require("asidar-lib")},496:e=>{"use strict";e.exports=require("electron")},681:e=>{"use strict";e.exports=require("electron-store")},30:e=>{"use strict";e.exports=require("ytdl-getinfo")},17:e=>{"use strict";e.exports=require("path")},310:e=>{"use strict";e.exports=require("url")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}(()=>{const{app:e,BrowserWindow:t,dialog:o}=s(496),r=s(17),n=s(310),i=s(23);function a(){const e=r.join(__dirname,"../build","index.html"),s=new t({height:480,width:680,resizable:!1,webPreferences:{nodeIntegration:!0,contextIsolation:!1},icon:r.join(__dirname,"../assets","asidar.ico")});i(s),s.on("closed",(()=>null==s)),void 0!==process.env.MODE?s.loadURL("http://localhost:3000/").then((()=>{s.webContents.openDevTools({mode:"detach"})})):(console.log("- production build test"),s.removeMenu(),s.loadURL(n.format({protocol:"file",pathname:e,slashes:!0})))}console.log("- mode: ",process.env.MODE),e.whenReady().then((()=>{a(),e.on("activate",(()=>{0==t.getAllWindows().length&&a()}))})),e.on("window-all-closed",(()=>{"darwin"!=process.platform&&e.quit()}))})()})();