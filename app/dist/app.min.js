(()=>{var e={43:(e,t,o)=>{const i=o(288),s=o(472),r=o(920),n=o(30),a=o(81),l=o(17),c=o(147);s.setFfmpegPath(i);let d=process.env.HOMEPATH;void 0===d&&(d="./");const p=l.resolve(d,"Music","Asidar");e.exports=async function(e,t={fileanme,fileprefix,path:l,audioQuality}){if("string"!=typeof e)return;void 0===t.audioQuality&&t.audioQuality,"string"!=typeof t.path&&(c.existsSync(p)||c.mkdirSync(p,{recursive:!0}),t.path=p);const o=(await n.getInfo(e,[],!1)).items[0],s=r(e,{filter:"audioonly"});void 0===t.filename&&(t.filename=o.title);const d=l.resolve(t.path,t.fileprefix+t.filename+".mp3"),u=a.spawn(String(i),["-loglevel","8","-hide_banner","-progress","pipe:3","-i","pipe:4","-b:a",`${t.audioQuality}k`,d],{windowsHide:!0,stdio:["inherit","inherit","inherit","pipe","pipe"]});s.pipe(u?.stdio[4])},e.exports={DEFAULT_DL_PATH:p,USER_HOMEDIR:d}},23:(e,t,o)=>{const{ipcMain:i,dialog:s,BrowserWindow:r}=o(496),{defaultSchema:n,restoreDefault:a,saveSettings:l,getUserPreferences:c}=o(158),d=o(43);e.exports=function(e){console.log("- events have loaded"),i.handle("select-dir",(async()=>await s.showOpenDialog(e,{properties:["openDirectory"]}))),i.handle("user-prefs",(e=>({user:c(),defaultPrefs:n}))),i.handle("restore",(()=>a)),i.handle("save",((e,t)=>{l(t)})),i.handle("download",(async(e,t)=>{const o=c();t&&d(t,{fileprefix:o.filePrefix,path:o.defaultDownloadsPath})}))}},158:(e,t,o)=>{const i=o(681),{DEFAULT_DL_PATH:s}=o(43),r=new i,n="user-settings",a={defaultDownloadsPath:s,lastTimeUpdated:new Date,audioQuality:"128",filePrefix:""};e.exports={saveSettings:function(e){console.log(e),r.set(n,e)},restoreDefault:function(){r.set(n,a)},getUserPreferences:function(){const e=r.get(n);return e||r.set(n,a),e},defaultSchema:a}},496:e=>{"use strict";e.exports=require("electron")},681:e=>{"use strict";e.exports=require("electron-store")},472:e=>{"use strict";e.exports=require("ffmetadata")},288:e=>{"use strict";e.exports=require("ffmpeg-static")},920:e=>{"use strict";e.exports=require("ytdl-core")},30:e=>{"use strict";e.exports=require("ytdl-getinfo")},81:e=>{"use strict";e.exports=require("child_process")},147:e=>{"use strict";e.exports=require("fs")},17:e=>{"use strict";e.exports=require("path")},310:e=>{"use strict";e.exports=require("url")}},t={};function o(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,o),r.exports}(()=>{const{app:e,BrowserWindow:t,dialog:i}=o(496),s=o(17),r=o(310),n=o(23);function a(){const e=s.join(__dirname,"../build","index.html"),o=new t({height:480,width:680,resizable:!1,webPreferences:{nodeIntegration:!0,contextIsolation:!1},icon:s.join(__dirname,"../assets","asidar.ico")});n(o),o.on("closed",(()=>null==o)),void 0!==process.env.MODE?o.loadURL("http://localhost:3000/").then((()=>{o.webContents.openDevTools({mode:"detach"})})):(console.log("- production build test"),o.removeMenu(),o.loadURL(r.format({protocol:"file",pathname:e,slashes:!0})))}console.log("- mode: ",process.env.MODE),e.whenReady().then((()=>{a(),e.on("activate",(()=>{0==t.getAllWindows().length&&a()}))})),e.on("window-all-closed",(()=>{"darwin"!=process.platform&&e.quit()}))})()})();