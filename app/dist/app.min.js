(()=>{var e={23:(e,t,s)=>{const{ipcMain:r,dialog:o,BrowserWindow:n}=s(496),{audioConverter:i}=s(478),a=s(30),l=new(s(158));e.exports=function(e=n){console.log("- events have loaded"),r.handle("select-dir",(async()=>await o.showOpenDialog(e,{properties:["openDirectory"]}))),r.handle("user-prefs",(e=>(console.log("called",l.getUserPreferences()),{user:l.getUserPreferences(),defaultPrefs:l.defaultSchema}))),r.handle("restore",(()=>l.restoreDefault())),r.handle("save",((e,t)=>{l.saveSettings(t)}));let t=[];r.handle("download",(async(e,s)=>{const r=l.getUserPreferences();if(!s)return;const o=(await a.getInfo(s)).items[0];return i(s,{outFilename:String(o.title).replace(/:|\?|\\|\/|\:|\*|<|>|\"|\|/g,""),outPath:r.defaultDownloadsPath,filePrefix:r.filePrefix,audioQuality:r.audioQuality}).then((e=>{e.on("end",(()=>{t.push(o.display_id)}))})),o})),r.handle("progress",((e,s)=>!!t.includes(s))),r.handle("clear",(()=>{t=[]}))}},158:(e,t,s)=>{const r=s(681),o=(s(17),new r);e.exports=class{constructor(){this.userSettingsKeyKey="user-settings",this.defaultSchema={defaultDownloadsPath:"C:\\",lastTimeUpdated:new Date,audioQuality:"128",filePrefix:""}}getUserPreferences(){const e=o.get(this.userSettingsKey);return e||o.set(this.userSettingsKey,this.defaultSchema),e[this.userSettingsKeyKey]}saveSettings(e){console.log(e),o.set(this.userSettingsKey,e)}restoreDefault(){o.set(this.userSettingsKey,this.defaultSchema)}}},478:e=>{"use strict";e.exports=require("asidar-lib")},496:e=>{"use strict";e.exports=require("electron")},681:e=>{"use strict";e.exports=require("electron-store")},30:e=>{"use strict";e.exports=require("ytdl-getinfo")},17:e=>{"use strict";e.exports=require("path")},310:e=>{"use strict";e.exports=require("url")}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}(()=>{const{app:e,BrowserWindow:t,dialog:r}=s(496),o=s(17),n=s(310),i=s(23);function a(){const e=o.join(__dirname,"../build","index.html"),s=new t({height:480,width:680,resizable:!1,webPreferences:{nodeIntegration:!0,contextIsolation:!1},icon:o.join(__dirname,"../assets","asidar.ico")});i(s),s.on("closed",(()=>null==s)),void 0!==process.env.MODE?s.loadURL("http://localhost:3000/").then((()=>{s.webContents.openDevTools({mode:"detach"})})):(console.log("- production build test"),s.removeMenu(),s.loadURL(n.format({protocol:"file",pathname:e,slashes:!0})))}console.log("- mode: ",process.env.MODE),e.whenReady().then((()=>{a(),e.on("activate",(()=>{0==t.getAllWindows().length&&a()}))})),e.on("window-all-closed",(()=>{"darwin"!=process.platform&&e.quit()}))})()})();